#This script filters the `predictor`.tif file by year, which are then summarized by watershed within the costrcas.shp file using the 'zonalstats' tool within the 'rasterstats' module in python. Turning the costrcas.shp file into a .geojson file is necessary for it to be read by the 'zonalstats' tool. This process outputs .csv files using a 'json2csv' tool. This program uses 'Fiona', 'Rasterio', 'gdal' and 'json2csv'.

fio cat /Users/kylechezik/sfu/River_Network_Temperature_Output/shp_costRCAs/costrcas.shp | rio zonalstats -r /Users/kylechezik/sfu/River_Network_Temperature_Output/predictors/$1.tif --sequence --prefix "year_" --stats "$2" | json2csv -k properties.GRIDCODE,properties.year_$2 >> /Users/kylechezik/sfu/River_Network_Temperature_Output/predictors/csv_stats/$1.csv
